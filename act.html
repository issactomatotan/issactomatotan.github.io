<style>
  html,body{ width:100%;height:100%;margin:0;padding:0;border:0; }
</style>

<canvas></canvas>

<script>
window.requestAnimationFrame= (function(){
  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
  function(callback){
    window.setTimeout(callback, 1000 / 60);
  };
})();

(function(){
  var c= document.getElementsByTagName('canvas')[0],
      can= c.getContext('2d'),
      ppl= [],
      count= 120;
  
  function resize(){
    c.width= window.innerWidth,
    c.height= window.innerHeight,
    can.fillStyle='#000000',
    can.fillRect(0,0,c.width,c.height)
  }
  
  function pplD(){
    var tf,pplnew={
      x: Math.floor(Math.random()*c.width),
      y: Math.floor(Math.random()*c.height),
      size: Math.random()*6+5,
      vx: (Math.random()-0.5)*4,
      vy: (Math.random()-0.5)*4
    }
        
    for(var i=0;i<ppl.length;i++){
      tf= coli(pplnew,ppl[i]);
      if(tf){
        pplD();
        return 
      } 
    }
    
    ppl.push(pplnew);
  }
  
  function addppl(){
    pplD();
    if(ppl.length<=count) setTimeout(addppl,100)
  }
  
  function canF(){
    addppl();
    requestAnimationFrame(render)
  }
  
  function coli(a,b){
    if((a.x+a.size>b.x+b.size && a.x-a.size<b.x+b.size) || (a.x+a.size>b.x-b.size && a.x-a.size<b.x-b.size)){
      if((a.y+a.size>b.y+b.size && a.y-a.size<b.y+b.size) || (a.y+a.size>b.y-b.size && a.y-a.size<b.y-b.size)){
        return true;
      }
    }
    return false;
  }
  
  function drawppl(d,p){
    
    var tf;
    
    for(var i=0;i<ppl.length;i++){
      if(i==p) continue;
      tf= coli(d,ppl[i]);
      if(tf){
        d.vx=d.vx*-1;
        d.vy=d.vy*-1;
        break;
      } 
    }
    
    if(d.x+d.size>c.width || d.x-d.size<0) d.vx=d.vx*-1;
    if(d.y+d.size>c.height || d.y-d.size<0) d.vy=d.vy*-1;
    
    d.x+= d.vx,
    d.y+= d.vy;
    
    can.fillStyle= '#a6e22e';
    can.beginPath();
    can.arc(d.x, d.y, d.size, 0, Math.PI*2, true);
    can.closePath();
    can.fill()
  }
  
  function render(){
    can.fillStyle='rgba(0,0,0,0.2)',
    can.fillRect(0,0,c.width,c.height)
    
    for(var i=0;i<ppl.length;i++){
      drawppl(ppl[i],i)
    }
    requestAnimationFrame(render)
  }
  
  window.onresize= resize;
  resize();
  canF()
})();
</script>